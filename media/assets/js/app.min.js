/*! genitaliame 2016-07-17 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};window.zoomSettings={targetsize:.9,preservescroll:!0,closeclick:!0},d=function(){function a(a,b){this.onResize=e(this.onResize,this),this.zoomOut=e(this.zoomOut,this),this.zoomIn=e(this.zoomIn,this),this.viewPhoto=e(this.viewPhoto,this),this.onPhotoClick=e(this.onPhotoClick,this),this.moveToCenter=e(this.moveToCenter,this),this.onScrollStart=e(this.onScrollStart,this),this.createDOMPhotos=e(this.createDOMPhotos,this),this.setup=e(this.setup,this);var c,d,f;this.size=b,c=[this.size[0],this.size[1]],this.WIDTH=c[0],this.HEIGHT=c[1],d=[120,180],this.item_width=d[0],this.item_height=d[1],f=[0,0],this.rows_in_screen=f[0],this.cols_in_screen=f[1],this.photoJSONList=[],this.photosDOMList=[],this.inZoom=!1,this.dragged=!1,this.container=$jQ(a),this.onResize()}return a.prototype.setup=function(a,b,c){var d;return this.photoJSONList=a,this.imgCounter=Math.floor(Math.random()*(this.photoJSONList.length-1)),window.addEventListener("resize",$jQ.debounce(300,this.onResize),!1),$jQ(document).on("mousewheel",this.onScrollStart.bind(this)),this.wall=new Wall("wall",{draggable:!0,scrollable:!1,width:this.item_width,height:this.item_height,speed:800,inertia:!0,inertiaSpeed:.9,printCoordinates:!1,rangex:[-100,100],rangey:[-100,100],callOnMouseUp:function(a){return function(a){}}(this),callOnMouseDown:function(a){return function(a){}}(this),callOnMouseDragged:$jQ.debounce(300,function(a){return function(a,b){var c,d;return c=a[0]>0&&1||-1,d=a[1]>0&&1||-1,!0}}(this)),callOnMouseClick:function(a){return function(b){return a.wall.getMovement()?void 0:a.onPhotoClick(b)}}(this),callOnUpdate:function(a){return function(b){return 0!==b.length?a.createDOMPhotos(b):void 0}}(this)}),this.wall.initWall(),b=null!=b?b:$jQ.noop,c=null!=c?c:$jQ.noop,d=$jQ("#wall").imagesLoaded().always(function(a,b){return c(a,b)}).progress(function(a,c){return b(a,c)})},a.prototype.createDOMPhotos=function(a){return a.each(function(a){return function(b,c){var d,e;return"random"===PHOTO_TILING?a.imgCounter=Math.floor(Math.random()*a.photoJSONList.length):"sequential"===PHOTO_TILING&&(a.imgCounter=(a.photoJSONList.length-1+a.imgCounter++)%a.photoJSONList.length),d=a.photoJSONList[a.imgCounter],e=new Element("img[src='"+d.url_small+"']"),e.inject(b.node),$jQ(b.node).imagesLoaded(function(a,b){return $jQ(e).addClass("loaded")}),$jQ(e).data("photo_info",d)}}(this))},a.prototype.onScrollStart=function(a){var b,c,d,e;return d=a.deltaX*a.deltaFactor,e=a.deltaY*a.deltaFactor,b=this.wall.wall.getStyle("left").toInt()+-1*d,c=this.wall.wall.getStyle("top").toInt()+e,this.wall.wall.setStyle("left",b),this.wall.wall.setStyle("top",c),this.wall.moved++,this.wall.options.callOnUpdate(this.wall.updateWall()),a.stopPropagation(),!1},a.prototype.moveToCenter=function(a){var b,c,d;return b=this.wall.getCoordinatesFromId(this.wall.getActiveItem()),d=[b.c+this.cols_in_screen/2,b.r+this.rows_in_screen/2].map(Math.floor),c=[d[0]-a.c,d[1]-a.r],this.wall.moveTo(b.c-c[0],b.r-c[1])},a.prototype.onPhotoClick=function(a,b){var c,d,e,f;return this.cTarget=$jQ(a.target),this.cTarget.is("img")&&(this.cTarget=this.cTarget.parent()),d=$jQ("img",this.cTarget).data("photo_info"),f=this.cTarget,c=f.attr("rel").split("x").map(Number),e={c:c[0],r:c[1]},this.moveToCenter(e),this.viewPhoto(this.cTarget)},a.prototype.viewPhoto=function(a){return window.overlay.setPage("photoview",a),window.overlay.show()},a.prototype.zoomIn=function(a){return this.prevTarget=this.cTarget,this.inZoom=!0,$jQ(a).attr("src",$jQ(a).data("photo_info").url),$jQ(a).imagesLoaded(function(a){return function(){return a.wall.normalizePosition()}}(this)),$jQ(a).zoomTo(window.zoomSettings)},a.prototype.zoomOut=function(){return this.inZoom=!1,$jQ("body").zoomTo(window.zoomSettings)},a.prototype.onResize=function(){var a,b;return a=[window.innerWidth,window.innerHeight],this.WIDTH=a[0],this.HEIGHT=a[1],b=[this.WIDTH/this.item_width,this.HEIGHT/this.item_height].map(Math.floor),this.cols_in_screen=b[0],this.rows_in_screen=b[1],$jQ(this.container).css({width:this.WIDTH,height:this.HEIGHT}),$jQ("#overlay").css({width:this.WIDTH,height:this.HEIGHT}),this.wall?this.wall.options.callOnUpdate(this.wall.updateWall()):void 0},a}(),b.exports=d},{}],2:[function(a,b,c){var d,e,f,g;d=a("./app4.coffee"),f=a("./overlay/manager.coffee"),e=a("./loader.coffee"),g=function(){var a,b,c,g,h,i,j;return ga("send","timing","JS Loading Time","jsloadtime",Math.round(performance.now())),i=new f("#overlay"),i.hide(),c=new e("#loading"),c.loading(),a=new d("#viewport",[window.innerWidth,window.innerHeight]),b=$jQ("#menu"),b.show(),j=30,g=function(a,b){return b.length>j?h(a,b):void 0},h=function(a,b){var d;return window.performance&&(d=Math.round(performance.now()),ga("send","timing","Images loading Time","imgloadtime",d)),c.complete()},$jQ.getJSON(API_URL,function(b){return function(b){return ga("send","timing","JSON loading Time","jsonloadtime",Math.round(performance.now())),a.setup(b,g,h)}}(this)),$jQ("#menu-mostraoteu").on("click",function(a){return i.on?i.hide():(i.setPage("mostraoteu"),i.show()),a.stopPropagation(),!1}),window.loader=c,window.overlay=i,window.banco=a,window.menu=b,window.$jQ=$jQ},b.exports.init=g,window.WIDTH=window.innerWidth,window.HEIGHT=window.innerHeight,window.PHOTO_TILING="sequential",$.fx.speeds._default=500,document.addEventListener("DOMContentLoaded",function(){return window.$jQ=$,$.noConflict(),g()})},{"./app4.coffee":1,"./loader.coffee":3,"./overlay/manager.coffee":7}],3:[function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a){this.complete=e(this.complete,this),this.loading=e(this.loading,this),this.el=$jQ(a)}return a.prototype.loading=function(){return $jQ(this.el).css({opacity:.8}).show().queue(function(a){return function(){return a.loadingAnimation(),$jQ(a.el).transition({opacity:1}).dequeue()}}(this))},a.prototype.loadingAnimation=function(){var a,b;return a=[".....",":....",".:...","..:..",":..:.",".:..:",":.:..","::.:.",".::.:","..::.","...::","....:"],b=0,this.load_id=setInterval(function(c){return function(){return b=++b%a.length,$jQ(c.el).children("p").text(a[b])}}(this),250)},a.prototype.complete=function(){return clearInterval(this.load_id),$jQ(this.el).transition({opacity:0}).queue(function(a){return function(){return $jQ(a.el).hide().dequeue()}}(this))},a}(),b.exports=d},{}],4:[function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b){this.parent=a,this.el=b,this.photoSubmitError=e(this.photoSubmitError,this),this.photoSubmitSuccess=e(this.photoSubmitSuccess,this),this.photoSubmitComplete=e(this.photoSubmitComplete,this),this.thumbnail=e(this.thumbnail,this),this.drop=e(this.drop,this),this.on_hide_complete=e(this.on_hide_complete,this),this.on_show_complete=e(this.on_show_complete,this),this.render=e(this.render,this),this.stop=e(this.stop,this),this.start=e(this.start,this),this.init=!1,this.delta=250,this.opts=["8=>         ","8==>        ","8===>       ","8=====>     ","8=======>  o","8======>    ","8===>       ","8==>        ","8>          "],this.idx=0,window.upinterval=null}return a.prototype.start=function(a){return this.dropzone=new Dropzone("#photo-submit",{url:window.API_SUBMIT_PHOTO,paramName:"photo",createImageThumbnails:!0,thumbnailWidth:300,thumbnailHeight:450,previewTemplate:'<div class"preview file-preview"></div>',parallelUploads:1,maxFilesize:2,acceptedFiles:"image/*",autoProcessQueue:!0}),this.dropzone.on("dragenter",this.dragEnter),this.dropzone.on("dragleave",this.dragLeave),this.dropzone.on("drop",this.drop),this.dropzone.on("thumbnail",this.thumbnail),this.dropzone.on("success",this.photoSubmitSuccess),this.dropzone.on("error",this.photoSubmitError),this.dropzone.on("complete",this.photoSubmitComplete),this.setupEvents()},a.prototype.stop=function(){},a.prototype.render=function(a){},a.prototype.on_show_complete=function(){},a.prototype.on_hide_complete=function(){},a.prototype.setupEvents=function(){},a.prototype.showDialog=function(a){return $jQ("#photo-submit").click()},a.prototype.dragEnter=function(a){return $jQ("#photo-submit").addClass("drag")},a.prototype.dragLeave=function(a){return $jQ("#photo-submit").removeClass("drag")},a.prototype.drop=function(){return $jQ(".info").html(""),$jQ("#photo-submit").css({"border-color":"#ffffff"}),this.dragLeave()},a.prototype.thumbnail=function(a,b){var c;return c=new Image,c.src=b,$jQ(c).bind("click",this.showDialog),$jQ("img","#photo-submit").length?$jQ("img","#photo-submit").attr({src:b}):$jQ("#photo-submit").append(c),$jQ(".dz-message").html(""),ga("send","event","upload","thumbnail")},a.prototype.photoSubmitComplete=function(a,b){return $jQ(".info").html(),$jQ("#photo-submit").css({"border-color":"#ffffff"})},a.prototype.photoSubmitSuccess=function(a,b){return $jQ(".info").removeClass("label-warning").addClass("label-success").html(" Thanks ! Obrigado ! Merci !  ArigatÅ ! Ø£ÙˆØ¨Ø±ÙŠØºØ§Ø¯Ùˆ ðŸ‘ ðŸ‘ "),ga("send","event","upload","complete"),setTimeout(function(){return overlay.on?overlay.hide(0):void 0},5e3)},a.prototype.photoSubmitError=function(a,b){var c;return c=b,b.hasOwnProperty("error")&&(c=b.error),ga("send","event","upload","error",c),$jQ(".info").removeClass("label-success").addClass("label-warning").html("ðŸ’© "+c),$jQ("#photo-submit").css({"border-color":"#ff0000"})},a}(),b.exports=d},{}],5:[function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b){this.parent=a,this.el=b,this.initComplete=e(this.initComplete,this),this.render=e(this.render,this),this.previous=e(this.previous,this),this.next=e(this.next,this),this.setActiveItem=e(this.setActiveItem,this),this.show=e(this.show,this),this.stop=e(this.stop,this),this.start=e(this.start,this),console.log("photview:Constructor"),this.init=!1,this.id=0,this.info={},this.tile=!1,this.pos={c:0,r:0},this.nextId=this.prevId=0,this.nextPhoto=this.prevPhoto={}}return a.prototype.start=function(a){return console.log("photoview:start"),window.photoview=!0,this.photoview=!0,$jQ(".next",this.el).bind("click",this.next),$jQ(".previous",this.el).bind("click",this.previous)},a.prototype.stop=function(){return console.log("photoview:stop")},a.prototype.show=function(){return console.log("photoview:show")},a.prototype.setActiveItem=function(a){var b;return this.tile=a,this.info=$jQ("img",this.tile).data("photo_info"),b=this.tile.attr("rel").split("x").map(Number),this.pos={c:b[0],r:b[1]},this.nextPos={c:this.pos.c+1,r:this.pos.r},this.prevPos={c:this.pos.c-1,r:this.pos.r},this.nextTile=$jQ("div[rel="+this.nextPos.c+"x"+this.nextPos.r+"]",window.banco.wall.wall),this.prevTile=$jQ("div[rel="+this.prevPos.c+"x"+this.prevPos.r+"]",window.banco.wall.wall),this.nextPhoto=$jQ("img",this.nextTile).data("photo_info"),this.prevPhoto=$jQ("img",this.prevTile).data("photo_info"),$jQ(".media.left > .photo",this.el).attr({src:this.prevPhoto.url}),$jQ(".media.center > .photo",this.el).attr({src:this.info.url}),$jQ(".media.right > .photo",this.el).attr({src:this.nextPhoto.url})},a.prototype.next=function(a){var b;return console.log("next:click"),b=$jQ(".media.left"),$jQ(".media.center").removeClass("center").addClass("left"),$jQ(".media.right").removeClass("right").addClass("center"),b.removeClass("left").addClass("right"),window.banco.wall.moveToNext(),this.setActiveItem(this.nextTile),a.stopPropagation()},a.prototype.previous=function(a){var b;return console.log("previous:click"),b=$jQ(".media.right"),$jQ(".media.center").removeClass("center").addClass("right"),$jQ(".media.left").removeClass("left").addClass("center"),b.removeClass("right").addClass("left"),window.banco.wall.moveToPrev(),this.setActiveItem(this.prevTile),a.stopPropagation()},a.prototype.render=function(a){return console.log("photoview:render"),this.setActiveItem(a)},a.prototype.initComplete=function(a){return console.log("photoview:init")},a}(),b.exports=d},{}],6:[function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b){this.parent=a,this.el=b,this.stop=e(this.stop,this),this.previewCanceled=e(this.previewCanceled,this),this.previewComplete=e(this.previewComplete,this),this.uploadedError=e(this.uploadedError,this),this.uploadedSuccessful=e(this.uploadedSuccessful,this),this.initComplete=e(this.initComplete,this),this.embedComplete=e(this.embedComplete,this),this.render=e(this.render,this),this.stop=e(this.stop,this),this.start=e(this.start,this),this.init=!1}return a.prototype.start=function(){return swfobject.switchOffAutoHideShow(),swfobject.registerObject("openbooth","9"),window.openbooth_options={enableSound:!0,enableFlash:!0,enableSettingsButton:!0,bandwidth:0,photoQuality:100,photoWidth:459,photoHeight:344,cameraWidth:459,cameraHeight:344,cameraFPS:25,timerTimeout:3,timerX:198,timerY:250,timerAlpha:.6,callbacks:{initComplete:this.initComplete,uploadSuccessful:this.uploadSuccessfull,onError:this.uploadError,previewComplete:this.previewComplete,previewCanceled:this.previewCanceled,videoStart:!1,noVideoDevices:!1,uploadComplete:!1},placeholders:{load:"/images/openbooth_allow_dev.jpg",save:"/images/openbooth_saving_dev.jpg",noVideoDevices:"/images/openbooth_nocameras_dev.jpg"}},window.openbooth=swfobject.getObjectById("openbooth"),this.openbooth=window.openbooth},a.prototype.stop=function(){},a.prototype.render=function(a){},a.prototype.embedComplete=function(){return console.log("Embed complete, calling openbooth.init()"),console.log(this.openbooth),this.openbooth.init(window.openbooth_options),this.openbooth.camInit(),console.log("Called. Waiting for init")},a.prototype.initComplete=function(a){console.log("Init completed"),this.openbooth.camInit()},a.prototype.uploadedSuccessful=function(a){},a.prototype.uploadedError=function(a){},a.prototype.previewComplete=function(a){},a.prototype.previewCanceled=function(a){},a.prototype.stop=function(){},a}(),b.exports=d},{}],7:[function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};e=a("./PhotoUpload.coffee"),g=a("./Photobooth.coffee"),f=a("./PhotoView.coffee"),d=function(){function a(a){this.hide=h(this.hide,this),this.show=h(this.show,this),this.setPage=h(this.setPage,this),this.el=$jQ(a),this.pages=["mostraoteu","photoview"],this.controllers=[new e(this,this.el),new f(this,this.el)],this.el.css({width:WIDTH,height:HEIGHT}),this.on=!1,this.init=!1,$jQ(".overlay").on("click",function(a){return function(b){var c;return c=$jQ(b.target).attr("class"),"infoscreen"===c||"photoview"===c?a.hide():void 0}}(this)),$jQ("#mostraoteu").hide(),$jQ("#photoview").hide()}return a.prototype.getController=function(a){return this.controllers[this.pages.lastIndexOf(a)]},a.prototype.getActiveController=function(){return this.controllers[this.pages.lastIndexOf(this.cpage_name)]},a.prototype.setPage=function(a,b){return null==b&&(b={}),this.cpage&&this.cpage.hide(),this.cpage=$jQ("#"+a),this.cpage_name=a,this.cobj=this.controllers[this.pages.lastIndexOf(a)],this.cobj.init||(this.cobj.start(b),this.cobj.init=!0),this.cobj.render(b)},a.prototype.show=function(){return $jQ("#menu-mostraoteu").addClass("closebtn"),this.el.addClass("visible"),this.cpage.show(),this.on=!0},a.prototype.hide=function(a){return this.el.removeClass("visible"),this.on=!1,this.cobj&&this.cobj.stop(),$jQ("#menu-mostraoteu").removeClass("closebtn")},a}(),b.exports=d},{"./PhotoUpload.coffee":4,"./PhotoView.coffee":5,"./Photobooth.coffee":6}]},{},[2]);